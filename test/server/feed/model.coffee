'use strict';

mock_feeds = {"count":50,"value":{"title":"KTXP","description":"Pipes Output","link":"http:\/\/pipes.yahoo.com\/pipes\/pipe.info?_id=2a1aee3dda9a657eaa4d8eece5441f8f","pubDate":"Sat, 19 Apr 2014 23:53:56 +0000","generator":"http:\/\/pipes.yahoo.com\/pipes\/","callback":"","items":[{"hash":"157ccef6dd0c61b088b5a53ec66ff7c388bb6e30","title":"[\u50b2\u5b0c\u96f6\u5b57\u5e55\u7d44][\u5730\u7403\u968a\u9577_Captain Earth_Kyaputen Asu][03][720P][MP4][\u7e41\u9ad4][\u6709\u611b\u6ce8\u91cb\u7248]","url":"http:\/\/bt.ktxp.com\/down\/1397949438\/157ccef6dd0c61b088b5a53ec66ff7c388bb6e30.torrent","description":null},{"hash":"d36844e47b5e12aa2b18a2e7346907bb7d1946a3","title":"\u3010\u6975\u5f71\u5b57\u5e55\u793e\u3011 \u2605 \u507d\u6200 Nisekoi 15 BIG5 MP4_720P","url":"http:\/\/bt.ktxp.com\/down\/1397948644\/d36844e47b5e12aa2b18a2e7346907bb7d1946a3.torrent","description":null},{"hash":"019033679b9a118623799afcd55bb0cdc4a05c9f","title":"[\u83ef\u76df\u5b57\u5e55\u793e&\u6f84\u7a7a\u5b78\u5712][The_irregular_at_magic_high_school][\u9b54\u6cd5\u79d1\u9ad8\u4e2d\u7684\u52a3\u7b49\u751f][03][BIG5][720p_MP4]","url":"http:\/\/bt.ktxp.com\/down\/1397948516\/019033679b9a118623799afcd55bb0cdc4a05c9f.torrent","description":null},{"hash":"6e4dd00a45f17a1f52dfa96d7aaba60ea5c70341","title":"[\u534e\u76df\u5b57\u5e55\u793e&\u6f84\u7a7a\u5b66\u56ed][The_irregular_at_magic_high_school][\u9b54\u6cd5\u79d1\u9ad8\u4e2d\u7684\u52a3\u7b49\u751f][03][GB][720p_MP4]","url":"http:\/\/bt.ktxp.com\/down\/1397948450\/6e4dd00a45f17a1f52dfa96d7aaba60ea5c70341.torrent","description":null},{"hash":"3048cff7d2d5e690a7079a524c19ea00c1872c30","title":"\u3010\u98ce\u6f2b\u8bed\u5b57\u5e55\u7ec4\u3011[Love Live \u7b2c\u4e8c\u5b63 Love Live! 2]\u7b2c2\u8bdd[MP4-720p]","url":"http:\/\/bt.ktxp.com\/down\/1397946618\/3048cff7d2d5e690a7079a524c19ea00c1872c30.torrent","description":null},{"hash":"8aa599a994733781abb3cecf428064da1a643cfc","title":"\u3010\u52a8\u6f2b\u56fd\u5b57\u5e55\u7ec4\u3011\u260504\u6708\u65b0\u756a[\u76ee\u9690\u90fd\u5e02\u7684\u6f14\u7ece\u8005][02][720P][\u7b80\u4f53][MP4]","url":"http:\/\/bt.ktxp.com\/down\/1397945954\/8aa599a994733781abb3cecf428064da1a643cfc.torrent","description":null},{"hash":"1607c6bdc30850d6d36e84a2b639285826cd16f5","title":"\u3010\u52d5\u6f2b\u570b\u5b57\u5e55\u7d44\u3011\u260504\u6708\u65b0\u756a[\u76ee\u96b1\u90fd\u5e02\u7684\u6f14\u7e79\u8005][02][720P][\u7e41\u9ad4][MP4]","url":"http:\/\/bt.ktxp.com\/down\/1397945914\/1607c6bdc30850d6d36e84a2b639285826cd16f5.torrent","description":null},{"hash":"a57825ce6ab36f5bbf19f6a77609315af01bfebb","title":"[\u6f84\u7a7a\u5b66\u56ed] \u4f2a\u604b \u7b2c15\u8bdd \u7b80\u4f53 MP4 720p","url":"http:\/\/bt.ktxp.com\/down\/1397945252\/a57825ce6ab36f5bbf19f6a77609315af01bfebb.torrent","description":null},{"hash":"8fdae90ff6ea64caa7df795b48c159af597f8403","title":"\u3010\u6781\u5f71\u5b57\u5e55\u793e\u3011 \u2605 \u4f2a\u604b Nisekoi 15 GB MP4_720P","url":"http:\/\/bt.ktxp.com\/down\/1397944367\/8fdae90ff6ea64caa7df795b48c159af597f8403.torrent","description":null},{"hash":"90c868369b4840cc29e3679ddc6dfc0c60eaa9b8","title":"\u3010WOLF\u5b57\u5e55\u7d44\u3011\u26054\u6708\u65b0\u756a\u3010\u76ee\u9690\u90fd\u5e02\u7684\u6f14\u7ece\u8005_Mekakucityactors\u3011\u3010\u7b2c02\u8bdd_\u5982\u6708attention\u3011[GB][720P][MP4]","url":"http:\/\/bt.ktxp.com\/down\/1397941767\/90c868369b4840cc29e3679ddc6dfc0c60eaa9b8.torrent","description":null},{"hash":"f1a4af6a8bcc6a47e97213be5ef8b6402ea80424","title":"\u3010DHR\u52d5\u7814\u5b57\u5e55\u7d44\u3011[\u60e1\u9b54\u7684\u8b0e\u8a9e_Riddle Story of Devil][03][\u7e41\u9ad4\u5916\u639b\u5b57\u5e55][1080P][AVC_Hi10P_AAC][MKV]","url":"http:\/\/bt.ktxp.com\/down\/1397941076\/f1a4af6a8bcc6a47e97213be5ef8b6402ea80424.torrent","description":null},{"hash":"08108a10eaa79c99e4d9a8786cd448bc5d94d669","title":"\u3010DHR\u52d5\u7814\u5b57\u5e55\u7d44\u3011[\u60e1\u9b54\u7684\u8b0e\u8a9e_Riddle Story of Devil][03][\u7e41\u9ad4][720P][MP4]","url":"http:\/\/bt.ktxp.com\/down\/1397941072\/08108a10eaa79c99e4d9a8786cd448bc5d94d669.torrent","description":null},{"hash":"acdaa0fceca8337bbee835633c9dcab931eb5863","title":"[\u98a8\u8eca\u5b57\u5e55\u7d44][\u76ee\u96b1\u90fd\u5e02\u7684\u6f14\u7e79\u8005][Mekakucity Actors][02][BIG5][720P][MP4]","url":"http:\/\/bt.ktxp.com\/down\/1397939941\/acdaa0fceca8337bbee835633c9dcab931eb5863.torrent","description":null},{"hash":"55bf233d73c5deb74ede7121218b20b883d313ae","title":"\u3010\u52a8\u6f2b\u56fd\u5b57\u5e55\u7ec4\u3011\u260504\u6708\u65b0\u756a[\u661f\u523b\u7684\u9f99\u9a91\u58eb][03][720P][\u7b80\u4f53][MP4]","url":"http:\/\/bt.ktxp.com\/down\/1397939372\/55bf233d73c5deb74ede7121218b20b883d313ae.torrent","description":null},{"hash":"e37da8df4028f1f2165571f4fad01170c5e05e89","title":"\u3010\u52d5\u6f2b\u570b\u5b57\u5e55\u7d44\u3011\u260504\u6708\u65b0\u756a[\u661f\u523b\u7684\u9f8d\u9a0e\u58eb][03][720P][\u7e41\u9ad4][MP4]","url":"http:\/\/bt.ktxp.com\/down\/1397939346\/e37da8df4028f1f2165571f4fad01170c5e05e89.torrent","description":null},{"hash":"e852519312b12f6b7936110959702054148a55d1","title":"\u3010DHR\u8089\u7247\u5c0f\u7ec4&\u8f7b\u4e4b\u56fd\u5ea6\u5b57\u5e55\u7ec4\u3011[\u5065\u5168\u673a\u6597\u58eb\/\u4e0d\u5065\u5168\u673a\u6597\u58eb_Kenzen Robo Daimidaler][03][\u7b80\u4f53][720P][MP4](ATX-HD)","url":"http:\/\/bt.ktxp.com\/down\/1397938341\/e852519312b12f6b7936110959702054148a55d1.torrent","description":null},{"hash":"7807249f8dc4a474e3c62df306ea5f9a3ded7a05","title":"\u3010KNA\u5b57\u5e55\u7d44\u3011\u3010\u507d\u6200 \u30cb\u30bb\u30b3\u30a4\u3011[\u7b2c07\u8a71][1920x1080][X264 Hi10P MKV][\u7e41\u9ad4\u5916\u639b]","url":"http:\/\/bt.ktxp.com\/down\/1397937825\/7807249f8dc4a474e3c62df306ea5f9a3ded7a05.torrent","description":null},{"hash":"6f7088d7ada6ae61bc6b9330e8dafb267a5f18d5","title":"[\u98ce\u8f66\u5b57\u5e55\u7ec4][\u540d\u4fa6\u63a2\u67ef\u5357][\u7b2c18\u90e8\u5267\u573a\u7248\u7279\u5178][735\u96c6][\u9644\u6709\u6697\u53f7\u7684\u8bf7\u5e16][\u7b80\u4f53][MP4][720P]","url":"http:\/\/bt.ktxp.com\/down\/1397937356\/6f7088d7ada6ae61bc6b9330e8dafb267a5f18d5.torrent","description":null},{"hash":"f0a859aa2ccba736f662eb09ec28f64e1fbadbca","title":"\u3010KNA\u5b57\u5e55\u7d44&DHR\u52d5\u7814\u5b57\u5e55\u7d44\u3011\u3010\u9b54\u6cd5\u79d1\u9ad8\u6821\u306e\u52a3\u7b49\u751f Mahouka Koukou No Rettousei\u3011[03][1280x720][MP4_PC&PSV\u517c\u5bb9][\u7e41\u9ad4]","url":"http:\/\/bt.ktxp.com\/down\/1397937317\/f0a859aa2ccba736f662eb09ec28f64e1fbadbca.torrent","description":null},{"hash":"a22bd152d037dee5d1455908fb79a0c32f518fb7","title":"\u3010DHR\u8089\u7247\u5c0f\u7d44&\u8f15\u4e4b\u570b\u5ea6\u5b57\u5e55\u7d44\u3011[\u5065\u5168\u6a5f\u9b25\u58eb\/\u4e0d\u5065\u5168\u6a5f\u9b25\u58eb_Kenzen Robo Daimidaler][03][\u7e41\u9ad4][720P][MP4](ATX-HD)","url":"http:\/\/bt.ktxp.com\/down\/1397937139\/a22bd152d037dee5d1455908fb79a0c32f518fb7.torrent","description":null},{"hash":"ee7ca083f7657307182d6866a73893538b821852","title":"\u3010\u52d5\u6f2b\u570b\u5b57\u5e55\u7d44&\u6f2b\u8c93\u5b57\u5e55\u7d44\u3011\u260504\u6708\u65b0\u756a[\u6f2b\u756b\u5bb6\u8207\u52a9\u624b\u5011][02][1280x720][\u7c21\u7e41\u5916\u639b][MKV]","url":"http:\/\/bt.ktxp.com\/down\/1397936967\/ee7ca083f7657307182d6866a73893538b821852.torrent","description":null},{"hash":"60c7852ac4204666dcb95a4704b61bce31fbdad2","title":"[\u98ce\u8f66\u5b57\u5e55\u7ec4][\u76ee\u9690\u90fd\u5e02\u7684\u6f14\u7ece\u8005][Mekakucity Actors][02][GB][720P][MP4]","url":"http:\/\/bt.ktxp.com\/down\/1397936365\/60c7852ac4204666dcb95a4704b61bce31fbdad2.torrent","description":null},{"hash":"de31a971238fb833fa5d418a43cf545036593ae2","title":"[DA\u540c\u300c\u5446\u300d\u5b57\u5e55\u7d44][4\u6708\u65b0\u756a][\u967d\u708eProject \u76ee\u9690\u90fd\u5e02\u7684\u6f14\u7ece\u8005 MekakuCity Actors][02][BIG5\u7e41][MP4][720p]","url":"http:\/\/bt.ktxp.com\/down\/1397935805\/de31a971238fb833fa5d418a43cf545036593ae2.torrent","description":null},{"hash":"7937123a50713db31869b223f2c30e217f1d1f87","title":"\u3010KNA\u5b57\u5e55\u7d44\u3011\u3010\u507d\u6200 \u30cb\u30bb\u30b3\u30a4\u3011[\u7b2c15\u8a71][1280x720][MP4_PC&PSV\u517c\u5bb9][\u7e41\u9ad4]","url":"http:\/\/bt.ktxp.com\/down\/1397935242\/7937123a50713db31869b223f2c30e217f1d1f87.torrent","description":null},{"hash":"53bd07c73d457fcc6df95ee2e372b5dd25cfba01","title":"\u3010\u6975\u5f71\u5b57\u5e55\u793e\u3011\u26054\u6708\u65b0\u756a \u661f\u523b\u9f8d\u9a0e\u58eb\/Seikoku no Dragner \u7b2c03\u8bdd BIG5 720P MP4","url":"http:\/\/bt.ktxp.com\/down\/1397934283\/53bd07c73d457fcc6df95ee2e372b5dd25cfba01.torrent","description":null},{"hash":"e238464461658570723ac37c65dc4f9c9fe3dfdc","title":"\u3010\u98ce\u8f66\u52a8\u6f2b\u3011[\u5730\u7403\u961f\u957f][Captain Earth][03][1280x720][\u7b80\u4f53][MP4]","url":"http:\/\/bt.ktxp.com\/down\/1397933733\/e238464461658570723ac37c65dc4f9c9fe3dfdc.torrent","description":null},{"hash":"829e41b1d56af9ab5036527f570266f7cfa4cc9f","title":"\u3010\u6975\u5f71\u5b57\u5e55\u793e\u3011 \u26054\u6708\u65b0\u756a \u3010\u9032\u64ca\u7684\u5de8\u4eba\u3011\u3010Shingeki no Kyojin\u3011 \u3010OAD-2\u3011\u3010#3.25\u8bdd\u3011 BIG5 MP4_480P","url":"http:\/\/bt.ktxp.com\/down\/1397933333\/829e41b1d56af9ab5036527f570266f7cfa4cc9f.torrent","description":null},{"hash":"3698bef69d8b587909bb972f2a0de6802fd71a9f","title":"\u3010\u6781\u5f71\u5b57\u5e55\u793e\u3011 \u26054\u6708\u65b0\u756a \u3010\u8fdb\u51fb\u7684\u5de8\u4eba\u3011\u3010Shingeki no Kyojin\u3011\u3010OAD-2 \u3011\u3010#3.25\u8bdd\u3011 GB MP4_480P","url":"http:\/\/bt.ktxp.com\/down\/1397932276\/3698bef69d8b587909bb972f2a0de6802fd71a9f.torrent","description":null},{"hash":"ad5c71fcd8aee0d771ef635a6079afd5063ad1cc","title":"\u3010\u6781\u5f71\u5b57\u5e55\u793e\u3011\u26054\u6708\u65b0\u756a \u661f\u523b\u7684\u9f99\u9a91\u58eb\/Seikoku no Dragner \u7b2c03\u8bdd GB 720P MP4","url":"http:\/\/bt.ktxp.com\/down\/1397931495\/ad5c71fcd8aee0d771ef635a6079afd5063ad1cc.torrent","description":null},{"hash":"6910c6c6317ab1389f8648b0c1f4a27fa06dd225","title":"\u3010RH\u5b57\u5e55\u7d44\u3011Line Town[29] [480P][BIG5][MP4][\u6025\u62db\u6821\u5c0d]","url":"http:\/\/bt.ktxp.com\/down\/1397931121\/6910c6c6317ab1389f8648b0c1f4a27fa06dd225.torrent","description":null},{"hash":"8ba13c53c127a0b26da9ebff455146e8c41de597","title":"[\u8f15\u4e4b\u570b\u5ea6\u5b57\u5e55\u7d44][\u661f\u523b\u7684\u9f8d\u9a0e\u58eb][\u7b2c3\u8a71][BIG5][720P][MP4]","url":"http:\/\/bt.ktxp.com\/down\/1397930609\/8ba13c53c127a0b26da9ebff455146e8c41de597.torrent","description":null},{"hash":"ff1eba029d04195bd0e66a23cfc5afa1006025db","title":"\u3010\u590f\u7802\u5b57\u5e55\u7d44\u3011\u2605\u56db\u6708\u65b0\u756a\u3010\u9f8d\u5a18\u4e03\u4e03\u4e03\u57cb\u85cf\u7684\u5bf6\u85cf\u3011\u7b2c02\u8a71 BIG5\/\u7e41\u9ad4 1280x720 MP4","url":"http:\/\/bt.ktxp.com\/down\/1397928897\/ff1eba029d04195bd0e66a23cfc5afa1006025db.torrent","description":null},{"hash":"cbd1636299b6e7f0c88708b924804e50e51d6b57","title":"\u3010\u590f\u7802\u5b57\u5e55\u7d44\u3011\u2605\u56db\u6708\u65b0\u756a\u3010\u9f99\u5a18\u4e03\u4e03\u4e03\u57cb\u85cf\u7684\u5b9d\u85cf\u3011\u7b2c02\u8bdd GB\/\u7b80\u4f53 1280x720 MP4","url":"http:\/\/bt.ktxp.com\/down\/1397928823\/cbd1636299b6e7f0c88708b924804e50e51d6b57.torrent","description":null},{"hash":"30ea9deb0b98e4996e0fbc14aab12e8c04ee1877","title":"[\u5929\u7a7a\u5b57\u5e55\u7ec4][\u54c6\u5566A\u68a6\u65b0\u756a New Doraemon][361][2014.04.18]\u7a7a\u5730\u7684\u6d77\u8c5a&\u7528\u65f6\u5149\u624b\u67aa\u8ba9\u788d\u4e8b\u7684\u4e1c\u897f\u6d88\u5931[720P][MP4][\u7b80\u65e5]","url":"http:\/\/bt.ktxp.com\/down\/1397928669\/30ea9deb0b98e4996e0fbc14aab12e8c04ee1877.torrent","description":null},{"hash":"7e5867341cfd5fa190e49953056036125279af5d","title":"\u3010\u96ea\u6f2b\u5f71\u5b57\u5e55\u7ec4\u3011\u26054\u6708\u65b0\u756a\u2605[KERORO\u519b\u66f9][BIG5-\u7e41\u4f53\u5b57\u5e55][\u7b2c05\u8bdd][1280x720][MP4][\u9644\u767e\u5ea6\u76d8\u4e0b\u8f7d\u5730\u5740]","url":"http:\/\/bt.ktxp.com\/down\/1397927830\/7e5867341cfd5fa190e49953056036125279af5d.torrent","description":null},{"hash":"60cd9187e9b833b16e38002319b2c4bad64f4ffa","title":"[\u8f7b\u4e4b\u56fd\u5ea6\u5b57\u5e55\u7ec4][\u661f\u523b\u7684\u9f99\u9a91\u58eb][\u7b2c3\u8bdd][GB][720P][MP4]","url":"http:\/\/bt.ktxp.com\/down\/1397927647\/60cd9187e9b833b16e38002319b2c4bad64f4ffa.torrent","description":null},{"hash":"8cbdcfa7ba93af79a7a080620a6372668af064fc","title":"[WLGO][Bokura_wa_Minna_Kawaisou][\u6211\u5011\u5927\u5bb6\u7684\u6cb3\u5408\u838a][03][BIG5][MP4][480P][4\u6708\u65b0\u756a]","url":"http:\/\/bt.ktxp.com\/down\/1397927025\/8cbdcfa7ba93af79a7a080620a6372668af064fc.torrent","description":null},{"hash":"10dec76f501d0dc72d4200d2b81a10de31d6ed29","title":"[WLGO][Bokura_wa_Minna_Kawaisou][\u6211\u5011\u5927\u5bb6\u7684\u6cb3\u5408\u838a][03][BIG5][MP4][720P][4\u6708\u65b0\u756a]","url":"http:\/\/bt.ktxp.com\/down\/1397927019\/10dec76f501d0dc72d4200d2b81a10de31d6ed29.torrent","description":null},{"hash":"4a6f370c0c0dfadc8909dd40bdb68e514d35ffd1","title":"[\u5b9d\u77f3Fans][4\u6708]Lady \u5b9d\u77f3\u5ba0\u7269 \u7b2c03\u8bdd 720p MP4","url":"http:\/\/bt.ktxp.com\/down\/1397927009\/4a6f370c0c0dfadc8909dd40bdb68e514d35ffd1.torrent","description":null},{"hash":"faa6e91c891c7499365bd104aa0579155c4c0923","title":"[WLGO][Inugamisan_to_Nekoyamasan][\u72ac\u795e\u540c\u5b78\u548c\u8c93\u5c71\u540c\u5b78][02][BIG5][MP4][720P][4\u6708\u65b0\u756a]","url":"http:\/\/bt.ktxp.com\/down\/1397925794\/faa6e91c891c7499365bd104aa0579155c4c0923.torrent","description":null},{"hash":"d089b8dbb8ea06099f13e336cfc0b0ae8f7b7799","title":"[ACB\u5b57\u5e55\u7ec4&\u5929\u7a7a\u5b57\u5e55\u7ec4][\u8721\u7b14\u5c0f\u65b0 Crayon Shin-chan][826][2014.04.18]\u6b63\u7537\u54e5\u54e5&\u8865\u5047\u7684\u7238\u7238[720P][MP4][\u7b80\u65e5]","url":"http:\/\/bt.ktxp.com\/down\/1397925250\/d089b8dbb8ea06099f13e336cfc0b0ae8f7b7799.torrent","description":null},{"hash":"8cc6a493ab65ad6e8d9e591c99dc363fe44de7c3","title":"\u3010\u60e1\u4fd7\u00d7KNA\u3011[\u661f\u523b\u7684\u9f8d\u9a0e\u58eb][Seikoku no Dragonar][03][720P][\u7e41\u9ad4][MP4]","url":"http:\/\/bt.ktxp.com\/down\/1397924965\/8cc6a493ab65ad6e8d9e591c99dc363fe44de7c3.torrent","description":null},{"hash":"fa9af851bbf22381d3612c600b9122079152a867","title":"[2014\u5e744\u6708\u756a] A.I.R.nesSub&\u5929\u9999\u5b57\u5e55\u793e JoJo's Bizarre Adventure SC JOJO\u7684\u5947\u5999\u5192\u9669 \u7b2c\u4e09\u90e8 \u661f\u5c18\u6597\u58eb \u7b2c03\u8bdd 720p \u7b80\u7e41\u5916\u6302","url":"http:\/\/bt.ktxp.com\/down\/1397924478\/fa9af851bbf22381d3612c600b9122079152a867.torrent","description":null},{"hash":"58133899b3ad632701803ce419d06c2c69084134","title":"\u3010F\u5b85\u301112\u5c81\u3002 OVA 01 \u7e41 480P MP4","url":"http:\/\/bt.ktxp.com\/down\/1397923885\/58133899b3ad632701803ce419d06c2c69084134.torrent","description":null},{"hash":"bd9f44cf35ead2194acfdba2c8db95d17ac14537","title":"\u3010\u7570\u57df\u5b57\u5e55\u7d44\u3011\u2605[\u91d1\u7530\u4e00\u5c11\u5e74\u4e8b\u4ef6\u7c3fR][Kindaichi Returns][03][1280x720][\u7e41\u9ad4][MP4]","url":"http:\/\/bt.ktxp.com\/down\/1397923573\/bd9f44cf35ead2194acfdba2c8db95d17ac14537.torrent","description":null},{"hash":"bfe481d152603b062d8e0c0e5334a7b80c684902","title":"\u3010\u5f02\u57df\u5b57\u5e55\u7ec4\u3011\u2605[\u91d1\u7530\u4e00\u5c11\u5e74\u4e8b\u4ef6\u7c3fR][Kindaichi Returns][03][1280x720][\u7b80\u4f53][MP4]","url":"http:\/\/bt.ktxp.com\/down\/1397923483\/bfe481d152603b062d8e0c0e5334a7b80c684902.torrent","description":null},{"hash":"0abad57c837dd1e6f99fc8d50e7f1b7068c065f9","title":"\u3010\u6076\u4fd7\u00d7KNA\u3011[\u661f\u523b\u7684\u9f99\u9a91\u58eb][Seikoku no Dragonar][03][720P][\u7b80\u4f53][MP4]","url":"http:\/\/bt.ktxp.com\/down\/1397923232\/0abad57c837dd1e6f99fc8d50e7f1b7068c065f9.torrent","description":null},{"hash":"fe1e1273f3d4924aca7e0713c76e35f084b7b0a8","title":"\u3010\u5f02\u57df\u5b57\u5e55\u7ec4\u3011\u2605 [\u5065\u5168\u673a\u6597\u58eb][Penguin Empire][03][1280x720][\u7b80\u4f53][mp4]","url":"http:\/\/bt.ktxp.com\/down\/1397923015\/fe1e1273f3d4924aca7e0713c76e35f084b7b0a8.torrent","description":null},{"hash":"0cd1c19f089e6833335c59d90ad005426a669794","title":"\u3010\u7570\u57df\u5b57\u5e55\u7d44\u3011\u2605 [\u5065\u5168\u6a5f\u9b25\u58eb][Penguin Empire][03][1280x720][\u7e41\u9ad4][mp4]","url":"http:\/\/bt.ktxp.com\/down\/1397922946\/0cd1c19f089e6833335c59d90ad005426a669794.torrent","description":null},{"hash":"2c442b3100146813290b0dd38928e7eb213f98cd","title":"\u3010RH&\u60a0\u54c8\u7483\u7fbd\u3011\u8bb0\u5f55\u7684\u5730\u5e73\u7ebf[Log_Horizon][08][BIG5][720P]","url":"http:\/\/bt.ktxp.com\/down\/1397921778\/2c442b3100146813290b0dd38928e7eb213f98cd.torrent","description":null}]}}
should = require('should')
mongoose = require('mongoose')
app = require('../../../server')
Feed = mongoose.model('Feed')

feed = null

describe('Feed Model', ->
  before((done)->
    mock_feed1 = mock_feeds.value.items[0]
    feed = new Feed(
      kind:'AN'
      title: mock_feed1.title
      url: mock_feed1.url
      hash: mock_feed1.hash
      season: Feed.getSeason(mock_feed1.title)
      episode: Feed.getEpisode(mock_feed1.title)
    )
    Feed.remove().exec()
    done()
  )
  afterEach((done)->
    done()
  )
  it('getSeasonAndEpisode works well', (done)->
    Feed.getSeason('【雪漫影字幕组】★4月新番★[KERORO军曹][BIG5-繁体字幕][第05话][1280x720][MP4][附百度盘下载地址]')
    .should.not.be.ok
    Feed.getEpisode('【雪漫影字幕组】★4月新番★[KERORO军曹][BIG5-繁体字幕][第05话][1280x720][MP4][附百度盘下载地址]')
    .should.equal('05')
    done()
  )
  it('load one feed', (done)->
    feed.save((err)->
      (err is null).should.be.ok
      done()
    )
  )
  it('kind should be either AN or EP', (done)->
    feed.kind = 'PN'
    feed.save (err)->
      should.exists(err)
      done()
  )
  it('hash should not be duplicated', (done)->
    feed.kind = 'AN'
    feed.save((err)->
      console.log 'err', err
    )

    mock_feed1 = mock_feeds.value.items[0]
    dupFeed = new Feed(
      kind:'AN'
      title: mock_feed1.title
      url: mock_feed1.url
      hash: mock_feed1.hash
      season: Feed.getSeason(mock_feed1.title)
      episode: Feed.getEpisode(mock_feed1.title)
    )
    dupFeed.save (err)->
      should.exists(err)
    done()
  )

)